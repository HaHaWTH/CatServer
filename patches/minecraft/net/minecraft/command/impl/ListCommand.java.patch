--- a/net/minecraft/command/impl/ListCommand.java
+++ b/net/minecraft/command/impl/ListCommand.java
@@ -11,6 +_,7 @@
 import net.minecraft.util.text.ITextComponent;
 import net.minecraft.util.text.TextComponentUtils;
 import net.minecraft.util.text.TranslationTextComponent;
+import org.bukkit.entity.Player;
 
 public class ListCommand {
    public static void register(CommandDispatcher<CommandSource> p_198522_0_) {
@@ -34,6 +_,14 @@
    private static int format(CommandSource p_208200_0_, Function<ServerPlayerEntity, ITextComponent> p_208200_1_) {
       PlayerList playerlist = p_208200_0_.getServer().getPlayerList();
       List<ServerPlayerEntity> list = playerlist.getPlayers();
+      // CraftBukkit Start
+      if (p_208200_0_.getBukkitSender() instanceof org.bukkit.entity.Player)
+      {
+         org.bukkit.entity.Player sender = (org.bukkit.entity.Player)p_208200_0_.getBukkitSender();
+         list = list.stream().filter((ep) -> sender.canSee(ep.getBukkitEntity())).collect(java.util.stream.Collectors.toList());
+      }
+      // CraftBukkit end
+
       ITextComponent itextcomponent = TextComponentUtils.formatList(list, p_208200_1_);
       p_208200_0_.sendSuccess(new TranslationTextComponent("commands.list.players", list.size(), playerlist.getMaxPlayers(), itextcomponent), false);
       return list.size();
