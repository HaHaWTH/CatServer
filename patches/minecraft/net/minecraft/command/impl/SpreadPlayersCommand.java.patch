--- a/net/minecraft/command/impl/SpreadPlayersCommand.java
+++ b/net/minecraft/command/impl/SpreadPlayersCommand.java
@@ -28,6 +_,8 @@
 import net.minecraft.util.math.vector.Vector2f;
 import net.minecraft.util.text.TranslationTextComponent;
 import net.minecraft.world.IBlockReader;
+import net.minecraft.world.World;
+import net.minecraft.world.server.ServerChunkProvider;
 import net.minecraft.world.server.ServerWorld;
 
 public class SpreadPlayersCommand {
@@ -162,7 +_,8 @@
             spreadplayerscommand$position = p_241072_2_[i++];
          }
 
-         entity.teleportToWithTicket((double)MathHelper.floor(spreadplayerscommand$position.x) + 0.5D, (double)spreadplayerscommand$position.getSpawnY(p_241072_1_, p_241072_3_), (double)MathHelper.floor(spreadplayerscommand$position.z) + 0.5D);
+         net.minecraftforge.event.entity.living.EntityTeleportEvent.SpreadPlayersCommand event = net.minecraftforge.event.ForgeEventFactory.onEntityTeleportSpreadPlayersCommand(entity, (double)MathHelper.floor(spreadplayerscommand$position.x) + 0.5D, (double)spreadplayerscommand$position.getSpawnY(p_241072_1_, p_241072_3_), (double)MathHelper.floor(spreadplayerscommand$position.z) + 0.5D);
+         if (!event.isCanceled()) entity.teleportToWithTicket(event.getTargetX(), event.getTargetY(), event.getTargetZ());
          double d2 = Double.MAX_VALUE;
 
          for(SpreadPlayersCommand.Position spreadplayerscommand$position1 : p_241072_2_) {
@@ -238,7 +_,7 @@
 
       public int getSpawnY(IBlockReader p_198710_1_, int p_198710_2_) {
          BlockPos.Mutable blockpos$mutable = new BlockPos.Mutable(this.x, (double)(p_198710_2_ + 1), this.z);
-         boolean flag = p_198710_1_.getBlockState(blockpos$mutable).isAir();
+         boolean flag = getType(p_198710_1_, blockpos$mutable).isAir(); // CraftBukkit
          blockpos$mutable.move(Direction.DOWN);
 
          boolean flag2;
@@ -257,7 +_,7 @@
 
       public boolean isSafe(IBlockReader p_241074_1_, int p_241074_2_) {
          BlockPos blockpos = new BlockPos(this.x, (double)(this.getSpawnY(p_241074_1_, p_241074_2_) - 1), this.z);
-         BlockState blockstate = p_241074_1_.getBlockState(blockpos);
+         BlockState blockstate = getType(p_241074_1_, blockpos); // CraftBukkit
          Material material = blockstate.getMaterial();
          return blockpos.getY() < p_241074_2_ && !material.isLiquid() && material != Material.FIRE;
       }
@@ -266,5 +_,12 @@
          this.x = MathHelper.nextDouble(p_198711_1_, p_198711_2_, p_198711_6_);
          this.z = MathHelper.nextDouble(p_198711_1_, p_198711_4_, p_198711_8_);
       }
+
+      // CraftBukkit start - add a version of getType which force loads chunks
+      private static BlockState getType(IBlockReader iblockaccess, BlockPos position) {
+         ((ServerChunkProvider) ((World) iblockaccess).getChunkSource()).getChunk(position.getX() >> 4, position.getZ() >> 4, true);
+         return iblockaccess.getBlockState(position);
+      }
+      // CraftBukkit end
    }
 }
