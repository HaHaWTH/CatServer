--- a/net/minecraft/server/integrated/IntegratedServer.java
+++ b/net/minecraft/server/integrated/IntegratedServer.java
@@ -13,6 +_,7 @@
 import net.minecraft.client.ClientBrandRetriever;
 import net.minecraft.client.Minecraft;
 import net.minecraft.client.multiplayer.LanServerPingThread;
+import net.minecraft.command.CommandSource;
 import net.minecraft.crash.CrashReport;
 import net.minecraft.entity.player.ServerPlayerEntity;
 import net.minecraft.profiler.IProfiler;
@@ -31,6 +_,7 @@
 import net.minecraftforge.api.distmarker.OnlyIn;
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
+import org.bukkit.command.CommandSender;
 
 @OnlyIn(Dist.CLIENT)
 public class IntegratedServer extends MinecraftServer {
@@ -56,9 +_,10 @@
       this.setPvpAllowed(true);
       this.setFlightAllowed(true);
       this.initializeKeyPair();
+      if (!net.minecraftforge.fml.server.ServerLifecycleHooks.handleServerAboutToStart(this)) return false;
       this.loadLevel();
       this.setMotd(this.getSingleplayerName() + " - " + this.getWorldData().getLevelName());
-      return true;
+      return net.minecraftforge.fml.server.ServerLifecycleHooks.handleServerStarting(this);
    }
 
    public void tickServer(BooleanSupplier p_71217_1_) {
@@ -92,6 +_,11 @@
       return true;
    }
 
+    @Override
+    public CommandSender getBukkitSender(CommandSource p0) {
+        return null;
+    }
+
    public File getServerDirectory() {
       return this.minecraft.gameDirectory;
    }
@@ -172,6 +_,7 @@
    }
 
    public void halt(boolean p_71263_1_) {
+      if (isRunning())
       this.executeBlocking(() -> {
          for(ServerPlayerEntity serverplayerentity : Lists.newArrayList(this.getPlayerList().getPlayers())) {
             if (!serverplayerentity.getUUID().equals(this.uuid)) {
