--- a/net/minecraft/util/WeightedList.java
+++ b/net/minecraft/util/WeightedList.java
@@ -14,12 +_,21 @@
 public class WeightedList<U> {
    protected final List<WeightedList.Entry<U>> entries;
    private final Random random = new Random();
+   private final boolean isUnsafe; // Paper
 
+   // Paper start - add useClone option
    public WeightedList() {
-      this(Lists.newArrayList());
-   }
-
-   private WeightedList(List<WeightedList.Entry<U>> p_i231541_1_) {
+      this(true);
+   }
+
+   public WeightedList(boolean isUnsafe) {
+      this(Lists.newArrayList(), isUnsafe);
+   }
+
+   private WeightedList(List<WeightedList.Entry<U>> p_i231541_1_) { this(p_i231541_1_, true); }
+   private WeightedList(List<WeightedList.Entry<U>> p_i231541_1_, boolean isUnsafe) {
+      this.isUnsafe = isUnsafe;
+      // Paper end
       this.entries = Lists.newArrayList(p_i231541_1_);
    }
 
@@ -39,13 +_,12 @@
    }
 
    public WeightedList<U> shuffle(Random p_226314_1_) {
-      this.entries.forEach((p_234004_1_) -> {
-         p_234004_1_.setRandom(p_226314_1_.nextFloat());
-      });
-      this.entries.sort(Comparator.comparingDouble((p_234003_0_) -> {
-         return p_234003_0_.getRandWeight();
-      }));
-      return this;
+      // Paper start - make concurrent safe, work off a clone of the list
+      List<WeightedList.Entry<U>> list = isUnsafe ? Lists.newArrayList(this.entries) : this.entries;
+      list.forEach((p_234004_1_) -> p_234004_1_.setRandom(p_226314_1_.nextFloat()));
+      list.sort(Comparator.comparingDouble(Entry::getRandWeight));
+      return isUnsafe ? new WeightedList<>(list, isUnsafe) : this;
+      // Paper end
    }
 
    public boolean isEmpty() {
