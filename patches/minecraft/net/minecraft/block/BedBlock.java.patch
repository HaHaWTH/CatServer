--- a/net/minecraft/block/BedBlock.java
+++ b/net/minecraft/block/BedBlock.java
@@ -100,10 +_,20 @@
 
             return ActionResultType.SUCCESS;
          } else {
+            // CraftBukkit start
+            BlockState finalblockstate = p_225533_1_;
+            BlockPos finalblockpos = p_225533_3_;
+
+            // CraftBukkit end
             p_225533_4_.startSleepInBed(p_225533_3_).ifLeft((p_220173_1_) -> {
-               if (p_220173_1_ != null) {
-                  p_225533_4_.displayClientMessage(p_220173_1_.getMessage(), true);
-               }
+               // CraftBukkit start - handling bed explosion from below here
+               if(p_220173_1_ == PlayerEntity.SleepResult.NOT_POSSIBLE_HERE) {
+                  this.explodeBed(finalblockstate, p_225533_2_, finalblockpos);
+               } else
+                  // CraftBukkit end
+                  if (p_220173_1_ != null) {
+                     p_225533_4_.displayClientMessage(p_220173_1_.getMessage(), true);
+                  }
 
             });
             return ActionResultType.SUCCESS;
@@ -111,8 +_,24 @@
       }
    }
 
+   // CraftBukkit start
+   private ActionResultType explodeBed(BlockState state, World world, BlockPos pos) {
+      world.removeBlock(pos, false);
+      BlockPos pos1 = pos.relative((state.getValue(BedBlock.FACING)).getOpposite());
+
+      if(world.getBlockState(pos1).getBlock() == this) {
+         world.removeBlock(pos1, false);
+      }
+
+      world.explode((Entity)null, DamageSource.badRespawnPointExplosion(), (ExplosionContext) null, (double)pos.getX() + 0.5D, (double)pos.getY() + 0.5D, (double)pos.getZ() + 0.5D, 5.0F, true, Explosion.Mode.DESTROY);
+
+      return ActionResultType.SUCCESS;
+   }
+   // CraftBukkit end
+
    public static boolean canSetSpawn(World p_235330_0_) {
-      return p_235330_0_.dimensionType().bedWorks();
+      // CraftBukkit - moved world and biome check into EntityHuman
+      return true || p_235330_0_.dimensionType().bedWorks();
    }
 
    private boolean kickVillagerOutOfBed(World p_226861_1_, BlockPos p_226861_2_) {
